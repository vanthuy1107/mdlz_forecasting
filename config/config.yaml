# ===============================
# MDLZ Warehouse Quantity Forecast
# Production Walk-Forward Setup
# ===============================

# -------------------------------
# Data Configuration
# -------------------------------
data:
  data_dir: "./dataset"
  file_pattern: "data_{year}.csv"
  years: [2024, 2025]

  target_col: "cube_out"
  brand_col: "brand"
  brand_id_col: "brand_id"
  time_col: "date"

  feature_cols:
    - "month_sin"
    - "month_cos"
    - "dayofmonth_sin"
    - "dayofmonth_cos"
    - "is_weekend"
    - "dow_sin"
    - "dow_cos"
    - "is_pre_off_holiday"
    - "is_pre_other_holiday"


# -------------------------------
# Window Configuration
# -------------------------------
window:
  input_size: 7        # context length (recommended 30â€“60 days)
  horizon: 1            # recursive 1-step prediction


# -------------------------------
# Model Configuration
# -------------------------------
model:
  name: "RNNForecastor"
  num_brands: null      # auto-set from data
  brand_emb_dim: 4
  input_dim: null       # auto-set from feature_cols
  hidden_size: 16
  n_layers: 2
  output_dim: 1         # MUST be 1 for recursive forecasting
  dropout_prob: 0.1


# -------------------------------
# Training Configuration
# -------------------------------
training:
  batch_size: 64
  val_batch_size: 32
  epochs: 20
  learning_rate: 0.001
  log_interval: 5
  optimizer: "Adam"
  loss: "Huber"

  scheduler:
    name: "ReduceLROnPlateau"
    mode: "min"
    factor: 0.5
    patience: 3
    min_lr: 0.00001

  device: "auto"


# -------------------------------
# Output Configuration
# -------------------------------
output:
  model_dir: "./outputs/models"
  save_model: true


# -------------------------------
# Inference / Deployment
# -------------------------------
inference:
  test_start: "2025-01-01"
  test_end: "2025-12-31"
  save_predictions: true
